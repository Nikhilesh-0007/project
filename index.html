<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Video Redirect</title>
  <style>
    :root { --bg1:#00b4db; --bg2:#0083b0; --accent:#ffeb3b; }
    html,body{height:100%;margin:0;font-family:Inter,Arial,Helvetica,sans-serif}
    body{
      display:flex;align-items:center;justify-content:center;
      background:linear-gradient(135deg,var(--bg1),var(--bg2));
      color:#fff;padding:20px;text-align:center;
    }
    .card{
      background:rgba(255,255,255,0.06);padding:28px;border-radius:12px;box-shadow:0 6px 24px rgba(0,0,0,0.25);
      max-width:520px;width:100%;
    }
    a{color:var(--accent);text-decoration:none;font-weight:700}
    .links{display:flex;flex-wrap:wrap;gap:8px;justify-content:center;margin-top:14px}
    .btn{background:rgba(255,255,255,0.08);padding:8px 12px;border-radius:8px;color:#fff;border:0;cursor:pointer}
    .muted{opacity:0.9}
    small{opacity:0.9;display:block;margin-top:6px}
  </style>
</head>
<body>
  <div class="card" id="card">
    <h1 id="title">Loadingâ€¦</h1>
    <p id="desc" class="muted">Please wait</p>

    <div id="actions" style="display:none">
      <div class="links" id="testLinks"></div>
      <small>Or test with query: <code>?video=varun</code> or hash: <code>#/varun</code></small>
    </div>
  </div>

  <script>
    // === Update these YouTube links as needed ===
    const videoLinks = {
      varun: "https://youtu.be/dQw4w9WgXcQ",       // Varun
      sreeker: "https://youtu.be/9bZkp7q19f0",     // Sreeker
      bharath: "https://youtu.be/3JZ_D3ELwOQ",     // Bharath
      divija: "https://youtu.be/L_jWHffIx5E",      // Divija
      prasanna: "https://youtu.be/fJ9rUzIMcZQ",    // Prasanna
      parley: "https://youtu.be/6Dh-RL__uN4"       // Parley
    };

    // Helper: normalize a candidate into a key
    function normalizeKey(s){
      if(!s) return "";
      return String(s).replace(/^\/+|\/+$/g,"").toLowerCase();
    }

    // 1) Try path (works when deployed with Netlify routes like /varun)
    const rawPath = window.location.pathname || "";
    let key = normalizeKey(rawPath);

    // 2) If not found, try query param ?video=varun (useful locally)
    if(!videoLinks[key]){
      const params = new URLSearchParams(window.location.search);
      const q = params.get("video");
      if(q) key = normalizeKey(q);
    }

    // 3) If still not found, try hash routes (#/varun or #varun)
    if(!videoLinks[key]){
      const h = window.location.hash || "";
      if(h){
        key = normalizeKey(h.replace(/^#\/?/, ""));
      }
    }

    const titleEl = document.getElementById("title");
    const descEl = document.getElementById("desc");
    const actions = document.getElementById("actions");

    function showNotFound(){
      titleEl.textContent = "Video not found ðŸ˜•";
      descEl.innerHTML = `No video route detected. If you're testing locally, either:
        <ul style="text-align:left;display:inline-block;margin:12px 0;padding-left:18px">
          <li>Use a query like <code>?video=varun</code></li>
          <li>Use a hash like <code>#/varun</code></li>
          <li>Or click one of the test links below.</li>
        </ul>`;
      actions.style.display = "block";
      populateTestLinks();
    }

    function populateTestLinks(){
      const container = document.getElementById("testLinks");
      container.innerHTML = "";
      Object.keys(videoLinks).forEach(k=>{
        const btn = document.createElement("button");
        btn.className = "btn";
        btn.textContent = k;
        btn.onclick = ()=> {
          // For local test we'll use query param which loads same file but with ?video=...
          // If deployed with Netlify, clicking will go to /k and Netlify will serve index.html for that route.
          if(location.protocol === "file:"){
            location.href = location.pathname + "?video=" + encodeURIComponent(k);
          } else {
            // on web, navigate to root + /k (this will work with Netlify _redirects or single-page deploy)
            const base = location.origin + (location.pathname.replace(/\/[^/]*$/,"") === "/" ? "" : "");
            location.href = (base.endsWith("/") ? base.slice(0,-1): base) + "/" + k;
          }
        };
        container.appendChild(btn);
      });
    }

    function redirectTo(url){
      titleEl.textContent = "Redirectingâ€¦";
      descEl.innerHTML = Opening <a href="${url}" target="_blank" rel="noopener">${url}</a> in 2s. If nothing happens, click the link.;
      // For safety open in same tab after short delay (2s)
      setTimeout(()=> { window.location.href = url; }, 2000);
    }

    // Main logic
    if(key && videoLinks[key]){
      redirectTo(videoLinks[key]);
    } else {
      showNotFound();
    }
  </script>
</body>
</html>
